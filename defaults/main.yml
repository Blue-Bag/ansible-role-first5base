---
# defaults/main.yml

# defaults for hostname
hostname_fqdn: "{{ ansible_fqdn }}"
hostname_name: "{{ hostname_fqdn.split('.').0 }}"

default_umask: '027'

f5base_dohostname: true
f5base_dosecurity: true
f5base_domotd: true

f5base_dolocale: yes
f5base_locales:
  - "en_GB.UTF-8"
  - "en_US.UTF-8"

# defaults for Apt Periodic

# Enable the update/upgrade script (0=disable)
apt_periodic_enable: "1"

# Do "apt-get update" automatically every n-days (0=disable)
apt_periodic_update: "1"

# Do "apt-get upgrade --download-only" every n-days (0=disable)
apt_periodic_dload_packages: "1"
apt_notify_email: 'root'
apt_notify_onlyonerror: 'true'

# Run the "unattended-upgrade" security upgrade script
# every n-days (0=disabled)
# Requires the package "unattended-upgrades" and will write
# a log in /var/log/unattended-upgrades
apt_periodic_unattended_upgrade: "0"

# Do "apt-get autoclean" every n-days (0=disable)
apt_periodic_autoclean: "7"

apt_automatic_reboot: 'False'

apt_origin_patterns:
   - "origin=Debian,archive=stable,label=Debian-Security"
   - "origin=Debian,archive=oldstable,label=Debian-Security"

apt_allowed_origins:
  - "${distro_id}:${distro_codename}-security"
  - "${distro_id}ESM:${distro_codename}"
#  - "${distro_id}:${distro_codename}-updates"
#  - "${distro_id}:${distro_codename}-proposed"
#  - "${distro_id}:${distro_codename}-backports"

srv_to_stop:
  - rpcbind

# Name Server Update
nameserver_update: False

# These are set to OpenDNS / google
f5base_nameserver_ips:
 - 208.67.220.220
 - 8.8.4.4
 - 208.67.222.222
 - 8.8.8.8

f5base_packages_required:
 - rsync
 - vim
 - patch
 - dbus
 - debsums
 - needrestart
 - locales

f5base_unattended_up_packages:
  - { name: 'unattended-upgrades', state: 'present'}
  - { name: 'apt-listchanges', state: 'present'}
  - { name: 'update-notifier', state: 'present'}

f5base_packages_started:
 - rsync

f5base_packages_remove:
 - landscape-client
 - landscape-common
 - whoopsie

f5base_umask_files:
  - { path: '/etc/profile', element: 'umask'}
  - { path: '/etc/login.defs', element: 'UMASK'}
  - { path: '/etc/init.d/rc', element: 'umask' }

f5base_custom_hosts_entries: []
f5base_hosts_group: 'servers'

###### Logrotate for rsyslog
f5base_dologrotate: no
f5base_logrotate_rotate_number: 7
f5base_logrotate_period: 'daily'
# if utting files off to s3 then don't delay compress
f5base_logrotate_delaycompress: yes
# if putting files off to S3 then uses date names
f5base_logrotate_datenames: no
f5base_logrotate_dateformat: '-%Y-%m-%d'
# Note that the postrotate gets the log file name not the resulting rotated file name
# https://serverfault.com/a/747066
# If result log file is (logfilepath).(log)-(20160105) formated, Maybe you can try this:
# postrotate
# DATE=`date '+%Y%m%d'`
# /path/to/script $1-$DATE
# endscript
# If you want (logfilepath)-(20160105).(log) format, youcan use:

# postrotate
# DATE=`date '+%Y%m%d'`
# LOGF=${1%*.}
# /path/to/script $LOGF-$DATE.log
# endscript
# with $1 return logfilepath
# if a custom postrotate command then put the command or file name
f5base_logrotate_postrotate_cmd: no
# is the PR cmd a file and if it is put it up
f5base_logrotate_postrotate_cmd_isfile: no
# if it is a file then paths are here
f5base_logrotate_postrotate_cmd_file_dest: '/usr/local/bin'
f5base_logrotate_postrotate_cmd_file_src: '/path/to/srcfile'
# any params passed to the command
# can use %1 for the name of the rotated file
f5base_logrotate_postrotate_cmd_param: no

f5base_do_gpg: no
f5base_gpg_public_key_path: '/path/to/public_key'
f5base_gpg_identity: 'ansible@youremailaddress.com'
